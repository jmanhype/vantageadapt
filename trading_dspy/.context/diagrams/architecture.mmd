graph TD
    A[Market Data Sources] --> B[Data Preprocessor]
    B --> C[Market Analysis DSPy Module]
    C --> D[Strategy Generator DSPy Module]
    D --> E[Trading Rules DSPy Module]
    E --> F[ML Trading Engine]
    F --> G[Backtesting Engine]
    G --> H[Performance Analyzer]
    H --> I[MiPro Optimizer]
    I --> J[Prompt Manager]
    J --> C
    
    K[Mem0ai Memory] --> D
    D --> K
    
    L[VectorBTPro] --> B
    M[Kate's 10 APIs] --> B
    
    N[Discord Sentiment] --> B
    O[Order Book L3] --> B
    P[News Sentiment] --> B
    
    Q[Dashboard] --> H
    R[Human Interface] --> J
    
    subgraph "Core Pipeline"
        C
        D
        E
    end
    
    subgraph "ML Components"
        F
        G
        H
    end
    
    subgraph "Optimization Loop"
        I
        J
    end
    
    subgraph "Data Sources"
        A
        L
        M
        N
        O
        P
    end
    
    style C fill:#e1f5fe
    style D fill:#e1f5fe
    style E fill:#e1f5fe
    style F fill:#f3e5f5
    style I fill:#fff3e0
    style K fill:#e8f5e8